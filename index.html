<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="theme-color" content="#FF7A00" />
  <meta name="description" content="Perci Command Center â€” Task management for Carlo and Perci" />
  <title>âš”ï¸ Perci Command Center</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="style.css" />
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>âš”ï¸</text></svg>" />
</head>
<body>
  <canvas id="bg-canvas"></canvas>

  <!-- TOP NAV -->
  <header class="topbar">
    <div class="topbar-left">
      <span class="logo">
        <span class="logo-icon">âš”ï¸</span>
        <span>Perci Command Center</span>
      </span>
    </div>
    <div class="topbar-center">
      <div class="topbar-status-pill" id="topbar-status-pill">
        <span class="topbar-mood-emoji" id="topbar-mood-emoji">âš”ï¸</span>
        <span class="topbar-status-text" id="topbar-status-text">Loading...</span>
      </div>
    </div>
    <div class="topbar-right">
      <div class="topbar-agent-badge" id="topbar-agent-badge">0 agents</div>
      <div class="topbar-live-indicator">
        <div class="live-dot-topbar"></div>
        <span id="topbar-live-label">Live</span>
      </div>
      <div class="last-updated" id="last-updated">â€”</div>
      <button class="theme-toggle" id="theme-toggle" onclick="toggleTheme()" title="Toggle Dark Mode">
        <span class="theme-icon" id="theme-icon">ğŸŒ™</span>
      </button>
      <button class="icon-btn" id="shortcuts-btn" onclick="toggleShortcuts()" title="Keyboard Shortcuts">âŒ¨ï¸</button>
      <button class="icon-btn" id="settings-btn" onclick="toggleSettings()" title="Settings">âš™ï¸</button>
    </div>
  </header>

  <!-- NAV TABS -->
  <nav class="nav-tabs">
    <button class="nav-tab active" data-tab="dashboard" onclick="switchTab('dashboard')">âš”ï¸ Command</button>
    <button class="nav-tab" data-tab="tasks" onclick="switchTab('tasks')">ğŸ“‹ Tasks</button>
    <button class="nav-tab" data-tab="content" onclick="switchTab('content')">ğŸ“¸ Content</button>
    <button class="nav-tab" data-tab="agents" onclick="switchTab('agents')">ğŸ¤– Agents</button>
    <button class="nav-tab" data-tab="branding" onclick="switchTab('branding')">ğŸ¨ Branding</button>
  </nav>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       DASHBOARD VIEW
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <div id="view-dashboard" class="view-container">
    <!-- PERCI STATUS HERO -->
    <div class="status-hero" id="status-hero">
      <div class="hero-glow-ring" id="hero-glow-ring"></div>
      <div class="status-hero-emoji" id="hero-emoji">âš”ï¸</div>
      <div class="status-hero-text" id="hero-text">Perci is standing by</div>
      <div class="status-hero-sub" id="hero-sub">Ready for action</div>
    </div>

    <div class="app-layout">
      <!-- LEFT SIDEBAR: Projects -->
      <aside class="sidebar">
        <div class="sidebar-section">
          <div class="sidebar-title">Projects</div>
          <div id="projects-list"></div>
        </div>
        <div class="sidebar-section">
          <div class="sidebar-title">Stats</div>
          <div id="stats-panel"></div>
        </div>
      </aside>

      <!-- MAIN CONTENT -->
      <main class="main-content">
        <!-- MISSION CONTROL -->
        <section class="mission-control" id="mission-control"></section>

        <!-- BRAIN DUMP BOX -->
        <section class="brain-dump" id="brain-dump">
          <div class="brain-dump-header">
            <span class="brain-dump-title">ğŸ§  Brain Dump</span>
            <span class="brain-dump-sub">Drop thoughts here â€” Perci reads this every heartbeat</span>
          </div>
          <textarea class="brain-dump-textarea" id="brain-dump-text" placeholder="What's on your mind? Tasks, ideas, links, anything..."></textarea>
          <div class="brain-dump-actions">
            <button class="brain-dump-send" id="brain-dump-send" onclick="sendBrainDump()">Send to Perci ğŸ“¨</button>
            <div class="brain-dump-last" id="brain-dump-last"></div>
          </div>
        </section>

        <!-- CARLO ACTION ITEMS -->
        <section class="carlo-actions" id="carlo-actions"></section>

        <!-- ACTIVE SUBAGENTS -->
        <section class="subagents-panel" id="subagents-panel"></section>

        <!-- PERCI NOTES PANEL -->
        <section class="perci-notes-panel" id="perci-notes-panel"></section>

        <!-- KANBAN BOARD -->
        <section class="kanban-section">
          <div class="section-header">
            <div class="section-title">Task Board</div>
            <div class="quick-filters" id="quick-filters">
              <button class="filter-chip active" data-filter="all" onclick="setQuickFilter('all')">All</button>
              <button class="filter-chip" data-filter="needs-carlo" onclick="setQuickFilter('needs-carlo')">ğŸ”´ Needs Me</button>
              <button class="filter-chip" data-filter="high" onclick="setQuickFilter('high')">ğŸ”´ High</button>
              <button class="filter-chip" data-filter="in-progress" onclick="setQuickFilter('in-progress')">âš™ï¸ Active</button>
            </div>
          </div>
          <div class="kanban-board" id="kanban-board"></div>
        </section>
      </main>

      <!-- RIGHT SIDEBAR: Activity Log -->
      <aside class="activity-sidebar">
        <div class="sidebar-title">Activity</div>
        <div id="activity-log"></div>
      </aside>
    </div>
  </div>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       TASKS VIEW (Full Task List with Filters)
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <div id="view-tasks" class="view-container" style="display:none">
    <div class="tasks-view">
      <div class="tasks-header">
        <h2 class="view-title">ğŸ“‹ All Tasks</h2>
        <div class="tasks-controls">
          <div class="filter-group">
            <label class="filter-label">Status</label>
            <select class="filter-select" id="filter-status" onchange="applyTaskFilters()">
              <option value="all">All</option>
              <option value="backlog">ğŸ§Š Backlog</option>
              <option value="todo">ğŸ“Œ Todo</option>
              <option value="in-progress">âš™ï¸ In Progress</option>
              <option value="blocked">ğŸš« Blocked</option>
              <option value="done">âœ… Done</option>
            </select>
          </div>
          <div class="filter-group">
            <label class="filter-label">Priority</label>
            <select class="filter-select" id="filter-priority" onchange="applyTaskFilters()">
              <option value="all">All</option>
              <option value="high">ğŸ”´ High</option>
              <option value="medium">ğŸŸ¡ Medium</option>
              <option value="low">ğŸŸ¢ Low</option>
            </select>
          </div>
          <div class="filter-group">
            <label class="filter-label">Project</label>
            <select class="filter-select" id="filter-project" onchange="applyTaskFilters()">
              <option value="all">All Projects</option>
            </select>
          </div>
          <label class="filter-checkbox">
            <input type="checkbox" id="filter-needs-carlo" onchange="applyTaskFilters()" />
            <span>ğŸ”´ Needs Carlo only</span>
          </label>
        </div>
      </div>
      <div class="tasks-list" id="tasks-list"></div>
      <div class="tasks-empty" id="tasks-empty" style="display:none">
        <div class="empty-icon">ğŸ“­</div>
        <div class="empty-text">No tasks match your filters</div>
      </div>
    </div>
  </div>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       CONTENT VIEW (Calendar & Content Planning)
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <div id="view-content" class="view-container" style="display:none">
    <div class="content-view">
      <div class="content-header">
        <h2 class="view-title">ğŸ“¸ Content Calendar</h2>
        <div class="content-nav">
          <button class="content-nav-btn" onclick="prevMonth()">â—€</button>
          <span class="content-month" id="content-month">February 2026</span>
          <button class="content-nav-btn" onclick="nextMonth()">â–¶</button>
        </div>
      </div>
      
      <div class="content-stats" id="content-stats">
        <div class="content-stat">
          <span class="content-stat-value" id="stat-scheduled">0</span>
          <span class="content-stat-label">Scheduled</span>
        </div>
        <div class="content-stat">
          <span class="content-stat-value" id="stat-posted">0</span>
          <span class="content-stat-label">Posted</span>
        </div>
        <div class="content-stat">
          <span class="content-stat-value" id="stat-drafts">0</span>
          <span class="content-stat-label">Drafts</span>
        </div>
      </div>

      <div class="calendar-grid" id="calendar-grid"></div>

      <div class="content-queue">
        <div class="queue-header">
          <span class="queue-title">ğŸ“… Upcoming Posts</span>
        </div>
        <div class="queue-list" id="queue-list"></div>
      </div>
    </div>
  </div>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       AGENTS VIEW (Monitor & Control)
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <div id="view-agents" class="view-container" style="display:none">
    <div class="agents-view">
      <div class="agents-header">
        <h2 class="view-title">ğŸ¤– Agent Control</h2>
      </div>

      <div class="agents-grid" id="agents-grid">
        <!-- Agent cards rendered by JS -->
      </div>

      <div class="agents-section">
        <div class="section-title">Active Sessions</div>
        <div class="sessions-list" id="sessions-list">
          <div class="sessions-empty">No active sub-agent sessions</div>
        </div>
      </div>

      <div class="agents-section">
        <div class="section-title">Recent Activity</div>
        <div class="agent-activity" id="agent-activity"></div>
      </div>
    </div>
  </div>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       BRANDING VIEW
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <div id="view-branding" class="view-container" style="display:none">
    <div class="branding-view">
      <div class="branding-header-new">
        <h2 class="view-title">ğŸ¨ Brand Guidelines</h2>
        <p class="branding-subtitle">Brand documents and identity guidelines for all projects</p>
      </div>
      <div class="branding-layout">
        <!-- Brand Cards Sidebar -->
        <aside class="brand-sidebar" id="brand-sidebar"></aside>
        <!-- Brand Documents Panel -->
        <main class="brand-docs-panel" id="brand-docs-panel">
          <div class="brand-docs-empty">
            <div class="empty-icon">ğŸ¨</div>
            <div class="empty-text">Select a brand to view its documents</div>
          </div>
        </main>
      </div>
    </div>
  </div>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       MODALS
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  
  <!-- Task Detail Modal -->
  <div class="modal-overlay" id="modal-overlay">
    <div class="modal" id="task-modal">
      <button class="modal-close" onclick="closeModal()">âœ•</button>
      <div id="modal-content"></div>
    </div>
  </div>

  <!-- Brief Modal -->
  <div class="modal-overlay" id="brief-overlay">
    <div class="modal" id="brief-modal">
      <button class="modal-close" onclick="closeBriefModal()">âœ•</button>
      <div id="brief-content"></div>
    </div>
  </div>

  <!-- Keyboard Shortcuts Modal -->
  <div class="modal-overlay" id="shortcuts-overlay">
    <div class="modal shortcuts-modal">
      <button class="modal-close" onclick="toggleShortcuts()">âœ•</button>
      <div class="modal-title">âŒ¨ï¸ Keyboard Shortcuts</div>
      <div class="shortcuts-grid">
        <div class="shortcut-item">
          <span class="shortcut-keys"><kbd>Ctrl</kbd><kbd>K</kbd></span>
          <span class="shortcut-desc">Search tasks</span>
        </div>
        <div class="shortcut-item">
          <span class="shortcut-keys"><kbd>Ctrl</kbd><kbd>Shift</kbd><kbd>N</kbd></span>
          <span class="shortcut-desc">New task</span>
        </div>
        <div class="shortcut-item">
          <span class="shortcut-keys"><kbd>Esc</kbd></span>
          <span class="shortcut-desc">Close modal</span>
        </div>
        <div class="shortcut-item">
          <span class="shortcut-keys"><kbd>1</kbd></span>
          <span class="shortcut-desc">Command tab</span>
        </div>
        <div class="shortcut-item">
          <span class="shortcut-keys"><kbd>2</kbd></span>
          <span class="shortcut-desc">Tasks tab</span>
        </div>
        <div class="shortcut-item">
          <span class="shortcut-keys"><kbd>3</kbd></span>
          <span class="shortcut-desc">Content tab</span>
        </div>
        <div class="shortcut-item">
          <span class="shortcut-keys"><kbd>4</kbd></span>
          <span class="shortcut-desc">Agents tab</span>
        </div>
        <div class="shortcut-item">
          <span class="shortcut-keys"><kbd>5</kbd></span>
          <span class="shortcut-desc">Branding tab</span>
        </div>
        <div class="shortcut-item">
          <span class="shortcut-keys"><kbd>D</kbd></span>
          <span class="shortcut-desc">Toggle dark mode</span>
        </div>
      </div>
    </div>
  </div>

  <!-- Quick Add Form -->
  <div class="quick-add-overlay" id="quick-add-overlay" onclick="closeQuickAdd(event)">
    <div class="quick-add-form" id="quick-add-form">
      <div class="quick-add-title">+ Add Task</div>
      <label class="quick-add-label">Title</label>
      <input type="text" class="quick-add-input" id="qa-title" placeholder="What needs to be done?" />
      <label class="quick-add-label">Project</label>
      <select class="quick-add-select" id="qa-project"></select>
      <label class="quick-add-label">Priority</label>
      <select class="quick-add-select" id="qa-priority">
        <option value="high">ğŸ”´ High</option>
        <option value="medium" selected>ğŸŸ¡ Medium</option>
        <option value="low">ğŸŸ¢ Low</option>
      </select>
      <label class="quick-add-label">Notes</label>
      <textarea class="quick-add-textarea" id="qa-notes" placeholder="Optional details..."></textarea>
      <div class="quick-add-actions">
        <button class="quick-add-cancel" onclick="closeQuickAdd()">Cancel</button>
        <button class="quick-add-submit" onclick="submitQuickAdd()">Add Task âš”ï¸</button>
      </div>
    </div>
  </div>

  <!-- Settings Panel -->
  <div class="settings-overlay" id="settings-overlay" onclick="closeSettings(event)">
    <div class="settings-panel" id="settings-panel">
      <div class="settings-header">
        <span>âš™ï¸ Settings</span>
        <button class="modal-close" onclick="toggleSettings()">âœ•</button>
      </div>
      <div class="settings-body">
        <div class="settings-section">
          <div class="settings-section-title">Display</div>
          <label class="settings-toggle-row">
            <span>Dark Mode</span>
            <input type="checkbox" id="setting-dark" onchange="toggleThemeFromSettings()" />
          </label>
          <label class="settings-toggle-row">
            <span>Compact View</span>
            <input type="checkbox" id="setting-compact" onchange="toggleCompact()" />
          </label>
          <label class="settings-toggle-row">
            <span>Sound Effects</span>
            <input type="checkbox" id="setting-sounds" onchange="toggleSounds()" checked />
          </label>
        </div>
        <div class="settings-section">
          <div class="settings-section-title">Info</div>
          <div class="settings-info-row">
            <span>Model Tiers</span>
            <span class="settings-info-value">Sonnet / Haiku / Opus</span>
          </div>
          <div class="settings-info-row">
            <span>Days Together</span>
            <span class="settings-info-value" id="settings-days">1</span>
          </div>
          <div class="settings-info-row">
            <span>Version</span>
            <span class="settings-info-value">v3.0</span>
          </div>
        </div>
        <div class="settings-section">
          <div class="settings-section-title">Data</div>
          <button class="settings-export-btn" onclick="exportData()">ğŸ“¦ Export Data</button>
          <button class="settings-danger-btn" onclick="resetAllData()">ğŸ—‘ï¸ Reset All Data</button>
          <p class="settings-warning">Export saves your tasks. Reset clears everything.</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Floating Add Button -->
  <button class="fab-add" id="fab-add" onclick="openQuickAdd()">+</button>

  <!-- Confetti Canvas -->
  <canvas id="confetti-canvas"></canvas>

  <!-- Toast Container -->
  <div class="toast-container" id="toast-container"></div>

  <script src="data/tasks.js"></script>
  <script src="data/content.js"></script>
  <script src="app.js"></script>
</body>
</html>
