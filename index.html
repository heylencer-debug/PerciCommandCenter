<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="theme-color" content="#FF7A00" />
  <meta name="description" content="Perci Command Center â€” Sir Percival's Visual Headquarters" />
  <title>âš”ï¸ Perci Command Center</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="style.css" />
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>âš”ï¸</text></svg>" />
</head>
<body>
  <canvas id="bg-canvas"></canvas>

  <!-- TOP NAV -->
  <header class="topbar">
    <div class="topbar-left">
      <span class="logo">
        <span class="logo-icon">âš”ï¸</span>
        <span>Perci Command Center</span>
      </span>
    </div>
    <div class="topbar-center">
      <div class="topbar-status-pill" id="topbar-status-pill">
        <span class="topbar-mood-emoji" id="topbar-mood-emoji">âš”ï¸</span>
        <span class="topbar-status-text" id="topbar-status-text">Loading...</span>
      </div>
    </div>
    <div class="topbar-right">
      <div class="topbar-agent-badge" id="topbar-agent-badge">0 agents</div>
      <div class="topbar-live-indicator">
        <div class="live-dot-topbar"></div>
        <span id="topbar-live-label">Live</span>
      </div>
      <div class="last-updated" id="last-updated">â€”</div>
      <button class="theme-toggle" id="theme-toggle" onclick="toggleTheme()" title="Toggle Dark Mode">
        <span class="theme-icon" id="theme-icon">ğŸŒ™</span>
      </button>
      <button class="icon-btn" id="shortcuts-btn" onclick="toggleShortcuts()" title="Keyboard Shortcuts">âŒ¨ï¸</button>
      <button class="icon-btn" id="settings-btn" onclick="toggleSettings()" title="Settings">âš™ï¸</button>
    </div>
  </header>

  <!-- NAV TABS -->
  <nav class="nav-tabs">
    <button class="nav-tab active" data-tab="dashboard" onclick="switchTab('dashboard')">âš”ï¸ Command</button>
    <button class="nav-tab" data-tab="reviews" onclick="switchTab('reviews')">ğŸ“‹ Perci Reviews</button>
    <button class="nav-tab" data-tab="vault" onclick="switchTab('vault')">ğŸ“ Vault</button>
    <button class="nav-tab" data-tab="gallery" onclick="switchTab('gallery')">ğŸ–¼ï¸ Gallery</button>
    <button class="nav-tab" data-tab="tasks" onclick="switchTab('tasks')">ğŸ“Œ Tasks</button>
    <button class="nav-tab" data-tab="content" onclick="switchTab('content')">ğŸ“¸ Content</button>
    <button class="nav-tab" data-tab="agents" onclick="switchTab('agents')">ğŸ¤– Agents</button>
    <button class="nav-tab" data-tab="branding" onclick="switchTab('branding')">ğŸ¨ Branding</button>
  </nav>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       DASHBOARD VIEW (COMMAND)
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <div id="view-dashboard" class="view-container">
    
    <!-- PERCI HERO HQ -->
    <div class="perci-hero-hq" id="perci-hero-hq">
      <div class="hero-glow-ring" id="hero-glow-ring"></div>
      <div class="hero-flame-container" id="hero-flames"></div>
      
      <div class="hero-avatar-section">
        <div class="hero-avatar" id="hero-avatar">
          <!-- Perci the Cat Mascot -->
          <img src="assets/perci-icons/perci-icon-01-classic.png" alt="Perci the Cat" class="perci-avatar-img" id="perci-avatar-img" onerror="this.style.display='none';this.nextElementSibling.style.display='flex';">
          <!-- Fallback Knight SVG Icon -->
          <svg viewBox="0 0 100 100" class="knight-svg" style="display:none;">
            <defs>
              <linearGradient id="swordGrad" x1="0%" y1="0%" x2="100%" y2="100%">
                <stop offset="0%" style="stop-color:#C0C0C0"/>
                <stop offset="50%" style="stop-color:#FFFFFF"/>
                <stop offset="100%" style="stop-color:#A0A0A0"/>
              </linearGradient>
              <linearGradient id="hiltGrad" x1="0%" y1="0%" x2="100%" y2="100%">
                <stop offset="0%" style="stop-color:#FF7A00"/>
                <stop offset="100%" style="stop-color:#FF5500"/>
              </linearGradient>
            </defs>
            <!-- Sword blade -->
            <path d="M50 5 L55 50 L50 55 L45 50 Z" fill="url(#swordGrad)" stroke="#888" stroke-width="1"/>
            <!-- Crossguard -->
            <rect x="35" y="50" width="30" height="6" rx="2" fill="url(#hiltGrad)"/>
            <!-- Handle -->
            <rect x="47" y="56" width="6" height="20" rx="1" fill="#4A3728"/>
            <!-- Pommel -->
            <circle cx="50" cy="80" r="5" fill="url(#hiltGrad)"/>
            <!-- Gem in pommel -->
            <circle cx="50" cy="80" r="2" fill="#3B82F6"/>
          </svg>
        </div>
        <div class="hero-mood-badge" id="hero-mood-badge">âš”ï¸</div>
      </div>
      
      <div class="hero-info">
        <h1 class="hero-title">SIR PERCIVAL</h1>
        <div class="hero-status-line">
          <span class="hero-mood-emoji" id="hero-mood-emoji">âš”ï¸</span>
          <span class="hero-status-text" id="hero-status-text">Standing by</span>
        </div>
        <div class="hero-current-task" id="hero-current-task">Ready for your command</div>
        <div class="hero-progress-container" id="hero-progress-container" style="display:none">
          <div class="hero-progress-bar">
            <div class="hero-progress-fill" id="hero-progress-fill"></div>
          </div>
          <span class="hero-progress-text" id="hero-progress-text">0%</span>
        </div>
        <div class="hero-sync-time" id="hero-sync-time">Last synced: â€”</div>
      </div>
    </div>

    <!-- MILESTONE TRACKER (V5) -->
    <div class="milestone-tracker" id="milestone-tracker">
      <!-- Rendered by JS -->
    </div>

    <div class="app-layout">
      <!-- LEFT SIDEBAR: Projects -->
      <aside class="sidebar">
        <div class="sidebar-section">
          <div class="sidebar-title">Projects</div>
          <div id="projects-list"></div>
        </div>
        <div class="sidebar-section">
          <div class="sidebar-title">Stats</div>
          <div id="stats-panel"></div>
        </div>
      </aside>

      <!-- MAIN CONTENT -->
      <main class="main-content">
        <!-- MISSION CONTROL -->
        <section class="mission-control" id="mission-control"></section>

        <!-- BRAIN DUMP BOX -->
        <section class="brain-dump" id="brain-dump">
          <div class="brain-dump-header">
            <span class="brain-dump-title">ğŸ§  Brain Dump</span>
            <span class="brain-dump-sub">Drop thoughts here â€” Perci reads this every heartbeat</span>
          </div>
          <textarea class="brain-dump-textarea" id="brain-dump-text" placeholder="What's on your mind? Tasks, ideas, links, anything..."></textarea>
          <div class="brain-dump-actions">
            <button class="brain-dump-send" id="brain-dump-send" onclick="sendBrainDump()">Send to Perci ğŸ“¨</button>
            <div class="brain-dump-last" id="brain-dump-last"></div>
          </div>
        </section>

        <!-- CARLO ACTION ITEMS -->
        <section class="carlo-actions" id="carlo-actions"></section>

        <!-- ACTIVE SUBAGENTS -->
        <section class="subagents-panel" id="subagents-panel"></section>

        <!-- PERCI NOTES PANEL -->
        <section class="perci-notes-panel" id="perci-notes-panel"></section>

        <!-- KANBAN BOARD -->
        <section class="kanban-section">
          <div class="section-header">
            <div class="section-title">Task Board</div>
            <div class="quick-filters" id="quick-filters">
              <button class="filter-chip active" data-filter="all" onclick="setQuickFilter('all')">All</button>
              <button class="filter-chip" data-filter="needs-carlo" onclick="setQuickFilter('needs-carlo')">ğŸ”´ Needs Me</button>
              <button class="filter-chip" data-filter="high" onclick="setQuickFilter('high')">ğŸ”´ High</button>
              <button class="filter-chip" data-filter="in-progress" onclick="setQuickFilter('in-progress')">âš™ï¸ Active</button>
            </div>
          </div>
          <div class="kanban-board" id="kanban-board"></div>
        </section>
      </main>

      <!-- RIGHT SIDEBAR: Pings (Activity Log) -->
      <aside class="activity-sidebar pings-sidebar">
        <div class="pings-header">
          <div class="sidebar-title">ğŸ”” Pings</div>
          <div class="pings-indicator" id="pings-indicator"></div>
        </div>
        <div id="activity-log" class="pings-feed"></div>
      </aside>
    </div>
  </div>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       PERCI REVIEWS VIEW â€” Task Review Panel
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <div id="view-reviews" class="view-container" style="display:none">
    <div class="reviews-view">
      <div class="reviews-header">
        <h2 class="view-title">âš”ï¸ Perci Reviews</h2>
        <p class="reviews-subtitle">What should we work on? Here's Perci's guidance on pending tasks.</p>
      </div>
      
      <!-- QUICK ACTIONS PANEL (V5) -->
      <div class="quick-actions-panel" id="quick-actions-panel">
        <div class="quick-actions-header">
          <span class="quick-actions-title">âš¡ Quick Actions</span>
        </div>
        <div class="quick-actions-grid">
          <button class="quick-action-btn qa-instagram" onclick="openPostDay1Modal()">
            <span class="qa-icon">ğŸ“¸</span>
            <span class="qa-label">Post Day 1 to Instagram</span>
          </button>
          <button class="quick-action-btn qa-generate" onclick="openDay2BriefModal()">
            <span class="qa-icon">ğŸ“</span>
            <span class="qa-label">Generate Day 2 Brief</span>
          </button>
          <button class="quick-action-btn qa-refresh" onclick="refreshData()">
            <span class="qa-icon" id="refresh-icon">ğŸ”„</span>
            <span class="qa-label">Refresh Data</span>
          </button>
        </div>
      </div>
      
      <div class="reviews-grid" id="reviews-grid">
        <!-- Review cards rendered by JS -->
      </div>
      <div class="reviews-empty" id="reviews-empty" style="display:none">
        <div class="empty-icon">âœ¨</div>
        <div class="empty-text">All clear! No tasks need attention right now.</div>
      </div>
    </div>
  </div>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       VAULT VIEW â€” Documents
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <div id="view-vault" class="view-container" style="display:none">
    <div class="vault-view">
      <div class="vault-header">
        <h2 class="view-title">ğŸ“ Documents Vault</h2>
        <p class="vault-subtitle">Key documents Perci manages and references</p>
      </div>
      <div class="vault-filters">
        <button class="vault-filter active" data-cat="all" onclick="filterVault('all')">All</button>
        <button class="vault-filter" data-cat="Brand" onclick="filterVault('Brand')">ğŸ¨ Brand</button>
        <button class="vault-filter" data-cat="Memory" onclick="filterVault('Memory')">ğŸ§  Memory</button>
        <button class="vault-filter" data-cat="Config" onclick="filterVault('Config')">âš™ï¸ Config</button>
        <button class="vault-filter" data-cat="Content" onclick="filterVault('Content')">ğŸ“„ Content</button>
      </div>
      <div class="vault-grid" id="vault-grid">
        <!-- Vault cards rendered by JS -->
      </div>
    </div>
  </div>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       GALLERY VIEW â€” Generated Images
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <div id="view-gallery" class="view-container" style="display:none">
    <div class="gallery-view">
      <div class="gallery-header">
        <h2 class="view-title">ğŸ–¼ï¸ Generated Images Gallery</h2>
        <p class="gallery-subtitle">Carousel slides and generated assets</p>
      </div>
      <div class="gallery-grid" id="gallery-grid">
        <!-- Gallery items rendered by JS -->
      </div>
      <div class="gallery-empty" id="gallery-empty" style="display:none">
        <div class="empty-icon">ğŸ¨</div>
        <div class="empty-text">No images generated yet</div>
      </div>
      
      <!-- Caption Preview Section -->
      <div class="gallery-caption-section" id="gallery-caption-section">
        <div class="caption-header">
          <span class="caption-title">ğŸ“ Day 1 Caption</span>
          <button class="caption-copy-btn" onclick="copyGalleryCaption()">ğŸ“‹ Copy</button>
        </div>
        <div class="caption-preview" id="gallery-caption-preview">
          <!-- Rendered by JS -->
        </div>
      </div>
    </div>
  </div>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       TASKS VIEW (Full Task List with Filters)
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <div id="view-tasks" class="view-container" style="display:none">
    <div class="tasks-view">
      <div class="tasks-header">
        <h2 class="view-title">ğŸ“‹ All Tasks</h2>
        <div class="tasks-controls">
          <div class="filter-group">
            <label class="filter-label">Status</label>
            <select class="filter-select" id="filter-status" onchange="applyTaskFilters()">
              <option value="all">All</option>
              <option value="backlog">ğŸ§Š Backlog</option>
              <option value="todo">ğŸ“Œ Todo</option>
              <option value="in-progress">âš™ï¸ In Progress</option>
              <option value="blocked">ğŸš« Blocked</option>
              <option value="done">âœ… Done</option>
            </select>
          </div>
          <div class="filter-group">
            <label class="filter-label">Priority</label>
            <select class="filter-select" id="filter-priority" onchange="applyTaskFilters()">
              <option value="all">All</option>
              <option value="high">ğŸ”´ High</option>
              <option value="medium">ğŸŸ¡ Medium</option>
              <option value="low">ğŸŸ¢ Low</option>
            </select>
          </div>
          <div class="filter-group">
            <label class="filter-label">Project</label>
            <select class="filter-select" id="filter-project" onchange="applyTaskFilters()">
              <option value="all">All Projects</option>
            </select>
          </div>
          <label class="filter-checkbox">
            <input type="checkbox" id="filter-needs-carlo" onchange="applyTaskFilters()" />
            <span>ğŸ”´ Needs Carlo only</span>
          </label>
        </div>
      </div>
      <div class="tasks-list" id="tasks-list"></div>
      <div class="tasks-empty" id="tasks-empty" style="display:none">
        <div class="empty-icon">ğŸ“­</div>
        <div class="empty-text">No tasks match your filters</div>
      </div>
    </div>
  </div>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       CONTENT VIEW (Calendar & Content Planning)
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <div id="view-content" class="view-container" style="display:none">
    <div class="content-view">
      <div class="content-header">
        <h2 class="view-title">ğŸ“¸ Content Calendar</h2>
        <div class="content-nav">
          <button class="content-nav-btn" onclick="prevMonth()">â—€</button>
          <span class="content-month" id="content-month">February 2026</span>
          <button class="content-nav-btn" onclick="nextMonth()">â–¶</button>
        </div>
      </div>
      
      <div class="content-stats" id="content-stats">
        <div class="content-stat">
          <span class="content-stat-value" id="stat-scheduled">0</span>
          <span class="content-stat-label">Scheduled</span>
        </div>
        <div class="content-stat">
          <span class="content-stat-value" id="stat-posted">0</span>
          <span class="content-stat-label">Posted</span>
        </div>
        <div class="content-stat">
          <span class="content-stat-value" id="stat-drafts">0</span>
          <span class="content-stat-label">Drafts</span>
        </div>
      </div>

      <div class="calendar-grid" id="calendar-grid"></div>

      <div class="content-queue">
        <div class="queue-header">
          <span class="queue-title">ğŸ“… Upcoming Posts</span>
        </div>
        <div class="queue-list" id="queue-list"></div>
      </div>
    </div>
  </div>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       AGENTS VIEW (Monitor & Control)
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <div id="view-agents" class="view-container" style="display:none">
    <div class="agents-view">
      <div class="agents-header">
        <h2 class="view-title">ğŸ¤– Agent Control</h2>
      </div>

      <div class="agents-grid" id="agents-grid">
        <!-- Agent cards rendered by JS -->
      </div>

      <div class="agents-section">
        <div class="section-title">Active Sessions</div>
        <div class="sessions-list" id="sessions-list">
          <div class="sessions-empty">No active sub-agent sessions</div>
        </div>
      </div>

      <div class="agents-section">
        <div class="section-title">Recent Activity</div>
        <div class="agent-activity" id="agent-activity"></div>
      </div>
    </div>
  </div>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       BRANDING VIEW
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <div id="view-branding" class="view-container" style="display:none">
    <div class="branding-view">
      <div class="branding-header-new">
        <h2 class="view-title">ğŸ¨ Brand Guidelines</h2>
        <p class="branding-subtitle">Brand documents and identity guidelines for all projects</p>
      </div>
      <div class="branding-layout">
        <!-- Brand Cards Sidebar -->
        <aside class="brand-sidebar" id="brand-sidebar"></aside>
        <!-- Brand Documents Panel -->
        <main class="brand-docs-panel" id="brand-docs-panel">
          <div class="brand-docs-empty">
            <div class="empty-icon">ğŸ¨</div>
            <div class="empty-text">Select a brand to view its documents</div>
          </div>
        </main>
      </div>
    </div>
  </div>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       MODALS
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  
  <!-- Task Detail Modal -->
  <div class="modal-overlay" id="modal-overlay">
    <div class="modal" id="task-modal">
      <button class="modal-close" onclick="closeModal()">âœ•</button>
      <div id="modal-content"></div>
    </div>
  </div>

  <!-- Brief Modal -->
  <div class="modal-overlay" id="brief-overlay">
    <div class="modal" id="brief-modal">
      <button class="modal-close" onclick="closeBriefModal()">âœ•</button>
      <div id="brief-content"></div>
    </div>
  </div>

  <!-- Vault Doc Modal -->
  <div class="modal-overlay" id="vault-modal-overlay">
    <div class="modal vault-modal" id="vault-modal">
      <button class="modal-close" onclick="closeVaultModal()">âœ•</button>
      <div id="vault-modal-content"></div>
    </div>
  </div>

  <!-- Gallery Image Modal -->
  <div class="modal-overlay" id="gallery-modal-overlay">
    <div class="modal gallery-modal" id="gallery-modal">
      <button class="modal-close" onclick="closeGalleryModal()">âœ•</button>
      <div id="gallery-modal-content"></div>
    </div>
  </div>

  <!-- Post Day 1 Modal (V5) -->
  <div class="modal-overlay" id="post-day1-modal-overlay">
    <div class="modal post-day1-modal" id="post-day1-modal">
      <button class="modal-close" onclick="closePostDay1Modal()">âœ•</button>
      <div id="post-day1-modal-content"></div>
    </div>
  </div>

  <!-- Day 2 Brief Modal (V5) -->
  <div class="modal-overlay" id="day2-brief-modal-overlay">
    <div class="modal day2-brief-modal" id="day2-brief-modal">
      <button class="modal-close" onclick="closeDay2BriefModal()">âœ•</button>
      <div id="day2-brief-modal-content"></div>
    </div>
  </div>

  <!-- Keyboard Shortcuts Modal -->
  <div class="modal-overlay" id="shortcuts-overlay">
    <div class="modal shortcuts-modal">
      <button class="modal-close" onclick="toggleShortcuts()">âœ•</button>
      <div class="modal-title">âŒ¨ï¸ Keyboard Shortcuts</div>
      <div class="shortcuts-grid">
        <div class="shortcut-item">
          <span class="shortcut-keys"><kbd>Ctrl</kbd><kbd>K</kbd></span>
          <span class="shortcut-desc">Search tasks</span>
        </div>
        <div class="shortcut-item">
          <span class="shortcut-keys"><kbd>Ctrl</kbd><kbd>Shift</kbd><kbd>N</kbd></span>
          <span class="shortcut-desc">New task</span>
        </div>
        <div class="shortcut-item">
          <span class="shortcut-keys"><kbd>Esc</kbd></span>
          <span class="shortcut-desc">Close modal</span>
        </div>
        <div class="shortcut-item">
          <span class="shortcut-keys"><kbd>1</kbd></span>
          <span class="shortcut-desc">Command tab</span>
        </div>
        <div class="shortcut-item">
          <span class="shortcut-keys"><kbd>2</kbd></span>
          <span class="shortcut-desc">Reviews tab</span>
        </div>
        <div class="shortcut-item">
          <span class="shortcut-keys"><kbd>3</kbd></span>
          <span class="shortcut-desc">Vault tab</span>
        </div>
        <div class="shortcut-item">
          <span class="shortcut-keys"><kbd>4</kbd></span>
          <span class="shortcut-desc">Gallery tab</span>
        </div>
        <div class="shortcut-item">
          <span class="shortcut-keys"><kbd>D</kbd></span>
          <span class="shortcut-desc">Toggle dark mode</span>
        </div>
      </div>
    </div>
  </div>

  <!-- Quick Add Form -->
  <div class="quick-add-overlay" id="quick-add-overlay" onclick="closeQuickAdd(event)">
    <div class="quick-add-form" id="quick-add-form">
      <div class="quick-add-title">+ Add Task</div>
      <label class="quick-add-label">Title</label>
      <input type="text" class="quick-add-input" id="qa-title" placeholder="What needs to be done?" />
      <label class="quick-add-label">Project</label>
      <select class="quick-add-select" id="qa-project"></select>
      <label class="quick-add-label">Priority</label>
      <select class="quick-add-select" id="qa-priority">
        <option value="high">ğŸ”´ High</option>
        <option value="medium" selected>ğŸŸ¡ Medium</option>
        <option value="low">ğŸŸ¢ Low</option>
      </select>
      <label class="quick-add-label">Notes</label>
      <textarea class="quick-add-textarea" id="qa-notes" placeholder="Optional details..."></textarea>
      <div class="quick-add-actions">
        <button class="quick-add-cancel" onclick="closeQuickAdd()">Cancel</button>
        <button class="quick-add-submit" onclick="submitQuickAdd()">Add Task âš”ï¸</button>
      </div>
    </div>
  </div>

  <!-- Settings Panel -->
  <div class="settings-overlay" id="settings-overlay" onclick="closeSettings(event)">
    <div class="settings-panel" id="settings-panel">
      <div class="settings-header">
        <span>âš™ï¸ Settings</span>
        <button class="modal-close" onclick="toggleSettings()">âœ•</button>
      </div>
      <div class="settings-body">
        <div class="settings-section">
          <div class="settings-section-title">Display</div>
          <label class="settings-toggle-row">
            <span>Dark Mode</span>
            <input type="checkbox" id="setting-dark" onchange="toggleThemeFromSettings()" />
          </label>
          <label class="settings-toggle-row">
            <span>Compact View</span>
            <input type="checkbox" id="setting-compact" onchange="toggleCompact()" />
          </label>
          <label class="settings-toggle-row">
            <span>Sound Effects</span>
            <input type="checkbox" id="setting-sounds" onchange="toggleSounds()" checked />
          </label>
        </div>
        <div class="settings-section">
          <div class="settings-section-title">Info</div>
          <div class="settings-info-row">
            <span>Model Tiers</span>
            <span class="settings-info-value">Sonnet / Haiku / Opus</span>
          </div>
          <div class="settings-info-row">
            <span>Days Together</span>
            <span class="settings-info-value" id="settings-days">1</span>
          </div>
          <div class="settings-info-row">
            <span>Version</span>
            <span class="settings-info-value">v4.0</span>
          </div>
        </div>
        <div class="settings-section">
          <div class="settings-section-title">Data</div>
          <button class="settings-export-btn" onclick="exportData()">ğŸ“¦ Export Data</button>
          <button class="settings-danger-btn" onclick="resetAllData()">ğŸ—‘ï¸ Reset All Data</button>
          <p class="settings-warning">Export saves your tasks. Reset clears everything.</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Floating Add Button -->
  <button class="fab-add" id="fab-add" onclick="openQuickAdd()">+</button>

  <!-- Confetti Canvas -->
  <canvas id="confetti-canvas"></canvas>

  <!-- Toast Container -->
  <div class="toast-container" id="toast-container"></div>

  <!-- MOBILE BOTTOM NAVIGATION -->
  <nav class="mobile-bottom-nav" id="mobile-bottom-nav">
    <a class="mobile-nav-item active" onclick="switchTab('dashboard')">
      <span class="mobile-nav-icon">âš”ï¸</span>
      <span>Command</span>
    </a>
    <a class="mobile-nav-item" onclick="switchTab('reviews')">
      <span class="mobile-nav-icon">ğŸ“‹</span>
      <span>Reviews</span>
    </a>
    <a class="mobile-nav-item" onclick="switchTab('tasks')">
      <span class="mobile-nav-icon">ğŸ“Œ</span>
      <span>Tasks</span>
    </a>
    <a class="mobile-nav-item" onclick="switchTab('content')">
      <span class="mobile-nav-icon">ğŸ“¸</span>
      <span>Content</span>
    </a>
    <a class="mobile-nav-item" onclick="switchTab('agents')">
      <span class="mobile-nav-icon">ğŸ¤–</span>
      <span>More</span>
    </a>
  </nav>

  <script src="data/tasks.js"></script>
  <script src="data/content.js"></script>
  <script src="app.js"></script>
  <script>
    // Sync mobile bottom nav with tab switching
    const originalSwitchTab = window.switchTab;
    window.switchTab = function(tab) {
      // Call original function
      if (originalSwitchTab) {
        originalSwitchTab(tab);
      }
      
      // Update mobile nav active state
      const mobileNavItems = document.querySelectorAll('.mobile-nav-item');
      const tabMap = {
        'dashboard': 0,
        'reviews': 1,
        'tasks': 2,
        'content': 3,
        'agents': 4
      };
      
      mobileNavItems.forEach((item, index) => {
        item.classList.toggle('active', index === tabMap[tab]);
      });
    };
  </script>
</body>
</html>
