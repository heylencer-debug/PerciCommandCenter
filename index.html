<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>âš”ï¸ Perci Command Center</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <canvas id="bg-canvas"></canvas>

  <!-- TOP NAV -->
  <header class="topbar">
    <div class="topbar-left">
      <span class="logo">âš”ï¸ Perci Command Center</span>
    </div>
    <div class="topbar-right">
      <div class="perci-status" id="perci-status">
        <div class="status-dot" id="status-dot"></div>
        <div class="status-info">
          <span class="status-mood" id="status-mood">âš”ï¸</span>
          <span class="status-text" id="status-text">Loading...</span>
        </div>
      </div>
      <div class="last-updated" id="last-updated">â€”</div>
      <button class="settings-btn" id="settings-btn" onclick="toggleSettings()" title="Settings">âš™ï¸</button>
    </div>
  </header>

  <div class="app-layout">
    <!-- LEFT SIDEBAR: Projects -->
    <aside class="sidebar">
      <div class="sidebar-section">
        <div class="sidebar-title">Projects</div>
        <div id="projects-list"></div>
      </div>
      <div class="sidebar-section">
        <div class="sidebar-title">Stats</div>
        <div id="stats-panel"></div>
      </div>
    </aside>

    <!-- MAIN CONTENT -->
    <main class="main-content">

      <!-- MISSION CONTROL -->
      <section class="mission-control" id="mission-control"></section>

      <!-- BRAIN DUMP BOX -->
      <section class="brain-dump" id="brain-dump">
        <div class="brain-dump-header">
          <span class="brain-dump-title">ğŸ§  Carlo's Brain Dump</span>
          <span class="brain-dump-sub">Drop thoughts here... Perci reads this every heartbeat</span>
        </div>
        <textarea class="brain-dump-textarea" id="brain-dump-text" placeholder="What's on your mind, Carlo? Tasks, ideas, links, anything..."></textarea>
        <div class="brain-dump-actions">
          <button class="brain-dump-send" id="brain-dump-send" onclick="sendBrainDump()">Send to Perci ğŸ“¨</button>
          <div class="brain-dump-last" id="brain-dump-last"></div>
        </div>
      </section>

      <!-- CARLO ACTION ITEMS -->
      <section class="carlo-actions" id="carlo-actions"></section>

      <!-- ACTIVE SUBAGENTS -->
      <section class="subagents-panel" id="subagents-panel"></section>

      <!-- KANBAN BOARD -->
      <section class="kanban-section">
        <div class="section-title">Task Board</div>
        <div class="kanban-board" id="kanban-board"></div>
      </section>

    </main>

    <!-- RIGHT SIDEBAR: Activity Log -->
    <aside class="activity-sidebar">
      <div class="sidebar-title">Activity Log</div>
      <div id="activity-log"></div>
    </aside>
  </div>

  <!-- TASK MODAL -->
  <div class="modal-overlay" id="modal-overlay">
    <div class="modal" id="task-modal">
      <button class="modal-close" onclick="closeModal()">âœ•</button>
      <div id="modal-content"></div>
    </div>
  </div>

  <!-- BRIEF MODAL -->
  <div class="modal-overlay" id="brief-overlay">
    <div class="modal" id="brief-modal">
      <button class="modal-close" onclick="closeBriefModal()">âœ•</button>
      <div id="brief-content"></div>
    </div>
  </div>

  <!-- QUICK ADD FORM -->
  <div class="quick-add-overlay" id="quick-add-overlay" onclick="closeQuickAdd(event)">
    <div class="quick-add-form" id="quick-add-form">
      <div class="quick-add-title">+ Add New Task</div>
      <label class="quick-add-label">Title</label>
      <input type="text" class="quick-add-input" id="qa-title" placeholder="Task title..." />
      <label class="quick-add-label">Project</label>
      <select class="quick-add-select" id="qa-project"></select>
      <label class="quick-add-label">Priority</label>
      <select class="quick-add-select" id="qa-priority">
        <option value="high">ğŸ”´ High</option>
        <option value="medium" selected>ğŸŸ¡ Medium</option>
        <option value="low">ğŸŸ¢ Low</option>
      </select>
      <label class="quick-add-label">Notes</label>
      <textarea class="quick-add-textarea" id="qa-notes" placeholder="Optional notes..."></textarea>
      <div class="quick-add-actions">
        <button class="quick-add-cancel" onclick="closeQuickAdd()">Cancel</button>
        <button class="quick-add-submit" onclick="submitQuickAdd()">Add Task âš”ï¸</button>
      </div>
    </div>
  </div>

  <!-- FLOATING ADD BUTTON -->
  <button class="fab-add" id="fab-add" onclick="openQuickAdd()">+</button>

  <!-- SETTINGS PANEL -->
  <div class="settings-overlay" id="settings-overlay" onclick="closeSettings(event)">
    <div class="settings-panel" id="settings-panel">
      <div class="settings-header">
        <span>âš™ï¸ Settings</span>
        <button class="modal-close" onclick="toggleSettings()">âœ•</button>
      </div>
      <div class="settings-body">
        <div class="settings-section">
          <div class="settings-section-title">Display</div>
          <label class="settings-toggle-row">
            <span>Compact View</span>
            <input type="checkbox" id="setting-compact" onchange="toggleCompact()" />
          </label>
        </div>
        <div class="settings-section">
          <div class="settings-section-title">Config</div>
          <div class="settings-info-row"><span>Model Tiers</span><span class="settings-info-value">Sonnet / Haiku / Opus</span></div>
          <div class="settings-info-row"><span>Days Together</span><span class="settings-info-value" id="settings-days">1</span></div>
        </div>
        <div class="settings-section">
          <div class="settings-section-title">Data</div>
          <button class="settings-danger-btn" onclick="resetAllData()">ğŸ—‘ï¸ Reset All Data to Defaults</button>
          <p class="settings-warning">This clears all localStorage data and restores original tasks.</p>
        </div>
      </div>
    </div>
  </div>

  <!-- CONFETTI CANVAS -->
  <canvas id="confetti-canvas"></canvas>

  <script src="data/tasks.js"></script>
  <script src="app.js"></script>
</body>
</html>
